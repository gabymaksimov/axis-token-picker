<style>
  body {
    font-family: "Inter", sans-serif;
    padding: 24px;
    background-color: #f3f5f7;
    color: #202020;
    /* text color */
  }

  h1 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 32px;
  }

  /* Container for the two divs */
  .outer {
    display: flex;
    gap: 64px;
    align-items: flex-start;
  }
  /* styling for left and right containers */
  #left,
  #right {
    flex: 1;
    min-width: 0;
  }

  #questionButton {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 24px;
    width: 100%;
    margin: 0;
    margin-bottom: 16px;
    box-sizing: border-box;

    /* Text */
    font-size: 18px;
    font-weight: 600;
    color: #202020;
    text-align: left;
    font-family: inherit;
  }

  .answerButton {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 24px;
    width: 100%;
    margin: 0;
    margin-bottom: 16px;
    box-sizing: border-box;

    /* Text */
    font-size: 18px;
    font-weight: 600;
    color: #202020;
    text-align: left;
    font-family: inherit;
  }

  .answerButton:hover,
  .answerButton:focus {
    background-color: #f8f8f8;
    border-color: #cccccc;
    box-shadow: 0px 4px 8px 0px rgba(32, 32, 32, 0.16);
  }

  .questionButton:hover h3,
  .questionButton:focus h3 {
    background-color: #f8f8f8;
    border-color: #cccccc;
    box-shadow: 0px 4px 8px 0px rgba(32, 32, 32, 0.16);
  }

  .questionButton h3 {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 24px;
    width: 100%;
    margin: 0;
    margin-bottom: 16px;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: center;

    font-size: 16px;
    font-weight: 600;
    color: #202020;
    text-align: left;
    font-family: inherit;
  }

  .selectedAnswer {
    font-weight: 400;
    font-size: 16px;
    color: #202020;
    overflow: hidden;
    flex-shrink: 0;
    text-align: right;
    align-items: center;
    display: inline-flex;
  }

  /* Span containing the actual question text */
  .questionText {
    overflow: hidden;
    white-space: normal;
    display: inline-flex;
    align-items: center;
  }

  .hidden {
    display: none;
  }

  .visible {
    display: block;
  }

  /* Reset button style */
  #resetButton {
    background-color: #ffffff;
    color: #202020;
    border: 1px solid #562672;
    border-radius: 8px;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease, box-shadow 0.3s ease,
      border-color 0.3s ease;
    margin-top: 0;
    text-align: center;
    width: 200px;
    position: absolute;
    top: 24px;
    right: 24px;
  }

  #resultsContainer {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 24px;
    width: 100%;
    margin: 0;
    margin-bottom: 16px;
    box-sizing: border-box;
    font-size: 16px;
    font-weight: 600;
    color: #202020;
    text-align: left;
    font-family: inherit;
  }

  #resultsContainer h3 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 16px;
  }

  #resultsContainer p {
    font-size: 16px;
    margin-bottom: 8px;
  }

  #hexVisual {
    width: 96px;
    height: 48px;
    border-radius: 4px;
    margin-top: 8px;
  }

  #finalAnswer {
    font-weight: 400px;
    font-size: 16px;
    color: #202020;
    text-align: left;
    font-family: inherit;
  }

  #resetButton:hover {
    background-color: #ffffff;
    border-color: #411d56;
    box-shadow: 0px 2px 4px 0px rgba(32, 32, 32, 0.08);
  }

  /* Responsive adjustments for wider screens */
  @media (min-width: 768px) {
    .outer {
      flex-direction: row;
      /* Side-by-side columns */
      gap: 64px;
      /* Original gap */
      align-items: flex-start;
      /* Align to top */
    }
    .questionButton h3 {
      font-size: 18px;
      /* Restore original font size */
    }
    .answerButton {
      font-size: 18px;
      /* Restore original font size */
    }
    .selectedAnswer {
      font-size: 16px;
      /* Restore original font size */
    }
  }
</style>

<h1>Axis Token Picker</h1>
<button id="resetButton">Reset</button>
<div id="outer" class="outer">
  <div id="left">
    <div id="questionLevel1" class="visible questionButton">
      <h3 id="questionButton1">
        <span class="questionText">What is the color used for?</span>
        <span class="selectedAnswer hidden"></span>
      </h3>
    </div>

    <div id="questionLevel2" class="hidden questionButton">
      <h3 id="questionButton2">
        <span class="questionText"> What kind of text?</span>
        <span class="selectedAnswer hidden"></span>
      </h3>
    </div>

    <div id="questionLevel3" class="hidden questionButton">
      <h3 id="questionButton3">
        <span class="questionText">What's the purpose of the text?</span>
        <span class="selectedAnswer hidden"></span>
      </h3>
    </div>
  </div>
  <div id="right" class="">
    <div id="answerLevel1" class="visible">
      <button id="answer1-1" class="answerButton">Text</button>
    </div>
    <div id="answerLevel2" class="hidden">
      <button id="answer2-1" class="answerButton">Neutral</button>
      <button id="answer2-2" class="answerButton">Coloured</button>
      <button id="answer2-3" class="answerButton">Link</button>
    </div>
    <div id="answerLevel3" class="hidden">
      <button id="answer3-1" class="answerButton">Default</button>
      <button id="answer3-2" class="answerButton">Subtle</button>
      <button id="answer3-3" class="answerButton">Disabled</button>
      <button id="answer3-4" class="answerButton">
        Inversed (Used on bold backgrounds)
      </button>
    </div>
    <div id="resultsContainer" class="hidden">
      <h3>Your token is:</h3>
      <p>Token <span id="token"></span></p>
      <p>Description <span id="tokenDescriptionDisplay"></span></p>
      <div id="hexVisual"></div>
    </div>
  </div>
</div>

<script src="q&a.js"></script>
<script>
  //Waits for the HTMl to fully load
  document.addEventListener("DOMContentLoaded", () => {
    // Text tokens question blocks
    const questionLevel1 = document.getElementById("questionLevel1");
    const questionLevel2 = document.getElementById("questionLevel2");
    const questionLevel3 = document.getElementById("questionLevel3");

    // Text answer blocks
    const answerLevel1Container = document.getElementById("answerLevel1"); // Changed to Container
    const answerLevel2Container = document.getElementById("answerLevel2"); // Changed to Container
    const answerLevel3Container = document.getElementById("answerLevel3"); // Changed to Container

    // --- Question Buttons (for Back functionality) ---
    const questionButton1 = document.getElementById("questionButton1");
    const questionButton2 = document.getElementById("questionButton2");
    const questionButton3 = document.getElementById("questionButton3");

    // spans to show selected answers
    const question1AnswerSpan =
      questionLevel1?.querySelector(".selectedAnswer");
    const question2AnswerSpan =
      questionLevel2?.querySelector(".selectedAnswer");
    const question3AnswerSpan =
      questionLevel3?.querySelector(".selectedAnswer");

    const resetButton = document.getElementById("resetButton");

    //get results container
    const resultsContainer = document.getElementById("resultsContainer");
    const tokenNameDisplay = document.getElementById("token");
    const tokenHexDisplay = document.getElementById("tokenHex");
    const tokenDescriptionDisplay = document.getElementById(
      "tokenDescriptionDisplay"
    ); //Added getElementById
    const hexVisual = document.getElementById("hexVisual");

    // Helper function to manage visibility classes
    function setVisibility(element, show) {
      if (element) {
        if (show) {
          element.classList.remove("hidden");
          element.classList.add("visible");
        } else {
          element.classList.add("hidden");
          element.classList.remove("visible");
        }
      }
    }

    function createAnswerButtons(questionId) {
      const answerData = answersData[questionId];
      if (!answerData) return "";

      let buttonsHTML = "";
      answerData.forEach((answer) => {
        buttonsHTML += `<button id="${answer.id}" class="answerButton">${answer.text}</button>`;
      });
      return buttonsHTML;
    }

    function getTokenResult(selectedAnswers) {
      if (!tokenData) return null; // Make sure tokenData is loaded

      for (const token of tokenData) {
        if (
          token.question1 === selectedAnswers[0] &&
          token.question2 === selectedAnswers[1] &&
          token.question3 === selectedAnswers[2]
        ) {
          return token;
        }
      }
      return null;
    }

    // --- Initialize App ---
    function initializeApp() {
      questionLevel1.querySelector(".questionText").textContent =
        questionsData[0].text;
      questionLevel2.querySelector(".questionText").textContent =
        questionsData[1].text;
      questionLevel3.querySelector(".questionText").textContent =
        questionsData[2].text;

      answerLevel1Container.innerHTML = createAnswerButtons("question1");
      answerLevel2Container.innerHTML = createAnswerButtons("question2");
      answerLevel3Container.innerHTML = createAnswerButtons("question3");

      setVisibility(questionLevel1, true);
      setVisibility(answerLevel1Container, true);
      setVisibility(questionLevel2, false);
      setVisibility(answerLevel2Container, false);
      setVisibility(questionLevel3, false);
      setVisibility(answerLevel3Container, false);
      setVisibility(resultsContainer, false);

      currentLevel = 1;
      selectedAnswers = [];
    }

    let currentLevel = 1;
    let selectedAnswers = [];
    const answerContainer = document.getElementById("right");
    const tokenData = [
      {
        text: {
          default: {
            $type: "color",
            $value: "{primitives.color.neutral.950}",
            $description: "",
            $extensions: {
              mode: {
                light: "{primitives.color.neutral.950}",
                dark: "{primitives.color.neutral.0}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-default",
                },
                variableId: "VariableID:1039:2337",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
          subtle: {
            $type: "color",
            $value: "{primitives.color.neutral.800}",
            $description: "",
            $extensions: {
              mode: {
                light: "{primitives.color.neutral.800}",
                dark: "{primitives.color.neutral.100}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-subtle",
                },
                variableId: "VariableID:1039:2338",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
          disabled: {
            $type: "color",
            $value: "{primitives.color.neutral.400}",
            $description: "",
            $extensions: {
              mode: {
                light: "{primitives.color.neutral.400}",
                dark: "{primitives.color.neutral.400}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-disabled",
                },
                variableId: "VariableID:1105:5350",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
          inverse: {
            $type: "color",
            $value: "{primitives.color.neutral.0}",
            $description:
              "inverse is used for text applied on coloured background, other than the main neutral colour backgrounds",
            $extensions: {
              mode: {
                light: "{primitives.color.neutral.0}",
                dark: "{primitives.color.neutral.950}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-inverse",
                },
                variableId: "VariableID:1218:5397",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
          "link-visited": {
            $type: "color",
            $value: "{primitives.color.brand.primary.500}",
            $description: "",
            $extensions: {
              mode: {
                light: "{primitives.color.brand.primary.500}",
                dark: "{primitives.color.brand.primary.200}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-link-visited",
                },
                variableId: "VariableID:3498:3819",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
          error: {
            $type: "color",
            $value: "{primitives.color.status.red.300}",
            $description: "",
            $extensions: {
              mode: {
                light: "{primitives.color.status.red.300}",
                dark: "{primitives.color.status.red.150}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-error",
                },
                variableId: "VariableID:3864:3694",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
          success: {
            $type: "color",
            $value: "{primitives.color.status.green.400}",
            $description: "",
            $extensions: {
              mode: {
                light: "{primitives.color.status.green.400}",
                dark: "{primitives.color.status.green.200}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-success",
                },
                variableId: "VariableID:3864:3695",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
          link: {
            $type: "color",
            $value: "{primitives.color.status.blue.300}",
            $description: "",
            $extensions: {
              mode: {
                light: "{primitives.color.status.blue.300}",
                dark: "{primitives.color.status.blue.300}",
              },
              figma: {
                codeSyntax: {
                  WEB: "--axis-color-text-link",
                },
                variableId: "VariableID:4236:5216",
                collection: {
                  id: "VariableCollectionId:68:602",
                  name: "color",
                  defaultModeId: "68:2",
                },
              },
            },
          },
        },
      },
    ];

    initializeApp();

    // --- Event Listeners ---
    answerContainer.addEventListener("click", function (event) {
      const clickedElement = event.target;
      if (clickedElement.classList.contains("answerButton")) {
        const selectedAnswerText = clickedElement.textContent;
        let targetQuestionSpan = null;

        if (clickedElement.parentNode === answerLevel1Container) {
          targetQuestionSpan = question1AnswerSpan;
          setVisibility(answerLevel1Container, false);
          setVisibility(questionLevel2, true);
          setVisibility(answerLevel2Container, true);
          currentLevel = 2;
          selectedAnswers[0] = selectedAnswerText;
        } else if (clickedElement.parentNode === answerLevel2Container) {
          targetQuestionSpan = question2AnswerSpan;
          setVisibility(answerLevel2Container, false);
          setVisibility(questionLevel3, true);
          setVisibility(answerLevel3Container, true);
          currentLevel = 3;
          selectedAnswers[1] = selectedAnswerText;
        } else if (clickedElement.parentNode === answerLevel3Container) {
          targetQuestionSpan = question3AnswerSpan;
          setVisibility(answerLevel3Container, false);
          setVisibility(resultsContainer, true);
          currentLevel = 4;
          selectedAnswers[2] = selectedAnswerText;

          const result = getTokenResult(selectedAnswers);
          if (result) {
            tokenNameDisplay.textContent = result.tokenName;
            tokenHexDisplay.textContent = result.tokenHex;
            tokenDescriptionDisplay.textContent =
              result.tokenDescriptionDisplay;
            hexVisual.style.backgroundColor = result.tokenHex;
          } else {
            console.log("No matching token found");
          }
        }

        if (targetQuestionSpan) {
          targetQuestionSpan.textContent = `- ${selectedAnswerText}`;
          setVisibility(targetQuestionSpan, true);
        }
      }
    });

    questionButton1?.addEventListener("click", () => {
      if (currentLevel > 1) {
        setVisibility(answerLevel2Container, false);
        setVisibility(questionLevel2, false);
        setVisibility(questionLevel1, true);
        setVisibility(answerLevel1Container, true);
        setVisibility(resultsContainer, false);
        question1AnswerSpan.textContent = "";
        setVisibility(question1AnswerSpan, false);
        currentLevel = 1;
        selectedAnswers = [];
      }
    });

    questionButton2?.addEventListener("click", () => {
      if (currentLevel > 2) {
        setVisibility(answerLevel3Container, false);
        setVisibility(questionLevel3, false);
        setVisibility(questionLevel2, true);
        setVisibility(answerLevel2Container, true);
        setVisibility(resultsContainer, false);
        question2AnswerSpan.textContent = "";
        setVisibility(question2AnswerSpan, false);
        currentLevel = 2;
        selectedAnswers = selectedAnswers.slice(0, 1);
      }
    });
    questionButton3?.addEventListener("click", () => {
      if (currentLevel > 3) {
        setVisibility(answerLevel3Container, false);
        setVisibility(questionLevel3, false);
        setVisibility(questionLevel2, true);
        setVisibility(answerLevel2Container, true);
        setVisibility(resultsContainer, false);
        question3AnswerSpan.textContent = "";
        setVisibility(question3AnswerSpan, false);
        currentLevel = 3;
        selectedAnswers = selectedAnswers.slice(0, 2);
      }
    });

    resetButton.addEventListener("click", () => {
      initializeApp();
    });
  });
</script>
